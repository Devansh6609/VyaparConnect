(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[940],{3423:function(e,s,t){Promise.resolve().then(t.bind(t,872))},6780:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(8030).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9687:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(8030).Z)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},9061:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(8030).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},872:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return x}});var a=t(7437),r=t(2265),n=t(6780),l=t(9687),i=t(3274),d=t(9061);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,t(8030).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var o=t(1513),m=t(3258),u=t(7138),x=()=>{let[e,s]=(0,r.useState)({}),[t,x]=(0,r.useState)(!0),[h,p]=(0,r.useState)(!1),[b,y]=(0,r.useState)(""),[g,f]=(0,r.useState)(""),[k,j]=(0,r.useState)("");(0,r.useEffect)(()=>{j("".concat(window.location.origin,"/api/webhooks/whatsapp")),(async()=>{x(!0);try{let e=await fetch("/api/settings/whatsapp");if(!e.ok)throw Error("Failed to load settings.");let t=await e.json();s(t)}catch(e){y(e.message)}finally{x(!1)}})()},[]);let v=e=>{let{name:t,value:a}=e.target;s(e=>({...e,[t]:a}))},w=async t=>{t.preventDefault(),p(!0),y(""),f("");try{let t=await fetch("/api/settings/whatsapp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();if(!t.ok)throw Error(a.error||"Failed to save settings.");s(a),f("Settings saved successfully!"),setTimeout(()=>f(""),3e3)}catch(e){y(e.message)}finally{p(!1)}},N=e=>{navigator.clipboard.writeText(e)};return t?(0,a.jsx)("div",{className:"p-8 flex items-center justify-center h-full",children:(0,a.jsx)(m.Z,{})}):(0,a.jsxs)("div",{className:"p-6 md:p-8 bg-gray-50/50 dark:bg-gray-900/50 min-h-screen",children:[(0,a.jsx)(u.default,{href:"/settings",className:"text-sm text-blue-600 hover:underline mb-4 inline-block",children:"← Back to Settings"}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"WhatsApp Setup"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Connect your WhatsApp Business Account to start messaging."}),(0,a.jsxs)("div",{className:"mt-8 max-w-4xl mx-auto space-y-8",children:[b&&(0,a.jsxs)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md flex items-center",children:[(0,a.jsx)(n.Z,{className:"h-5 w-5 mr-3"}),(0,a.jsx)("span",{children:b})]}),g&&(0,a.jsx)("div",{className:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-md",children:(0,a.jsx)("p",{children:g})}),(0,a.jsxs)(o.E.div,{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-100/50 dark:border-gray-700/50",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Step 1: Enter Your API Credentials"}),(0,a.jsxs)("div",{className:"p-3 bg-blue-50 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 rounded-md text-sm flex items-start mb-4",children:[(0,a.jsx)(l.Z,{className:"w-5 h-5 mr-2 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("span",{children:["Find these credentials in your ",(0,a.jsx)("a",{href:"https://developers.facebook.com/apps/",target:"_blank",rel:"noopener noreferrer",className:"font-bold underline",children:"Meta for Developers App"})," under ",(0,a.jsx)("code",{className:"bg-black/10 px-1 rounded",children:"WhatsApp > API Setup"}),"."]})]}),(0,a.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Phone Number ID"}),(0,a.jsx)("input",{type:"text",name:"whatsappPhoneNumberId",value:e.whatsappPhoneNumberId||"",onChange:v,className:"w-full border rounded-md p-2 mt-1 dark:bg-gray-700 dark:border-gray-600",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Business Account ID"}),(0,a.jsx)("input",{type:"text",name:"whatsappBusinessAccountId",value:e.whatsappBusinessAccountId||"",onChange:v,className:"w-full border rounded-md p-2 mt-1 dark:bg-gray-700 dark:border-gray-600",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Permanent Access Token"}),(0,a.jsx)("input",{type:"password",name:"whatsappAccessToken",value:e.whatsappAccessToken||"",onChange:v,className:"w-full border rounded-md p-2 mt-1 dark:bg-gray-700 dark:border-gray-600",required:!0})]}),(0,a.jsx)("div",{className:"flex justify-end pt-2",children:(0,a.jsxs)("button",{type:"submit",disabled:h,className:"flex items-center justify-center px-6 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 disabled:opacity-50",children:[h?(0,a.jsx)(i.Z,{className:"animate-spin mr-2"}):(0,a.jsx)(d.Z,{className:"mr-2"}),h?"Saving...":"Save Credentials"]})})]})]}),(0,a.jsxs)(o.E.div,{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-100/50 dark:border-gray-700/50",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Step 2: Configure Webhook in Meta"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Copy the following values and paste them into your Meta App's webhook configuration page."}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Callback URL"}),(0,a.jsxs)("div",{className:"flex items-center mt-1",children:[(0,a.jsx)("input",{type:"text",value:k,readOnly:!0,className:"w-full border rounded-l-md p-2 bg-gray-100 dark:bg-gray-700/50 font-mono text-xs"}),(0,a.jsx)("button",{onClick:()=>N(k),className:"p-2 border border-l-0 rounded-r-md bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500",children:(0,a.jsx)(c,{size:16})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Verify Token"}),(0,a.jsxs)("div",{className:"flex items-center mt-1",children:[(0,a.jsx)("input",{type:"text",value:e.whatsappVerifyToken||"Save credentials to generate a token",readOnly:!0,className:"w-full border rounded-l-md p-2 bg-gray-100 dark:bg-gray-700/50 font-mono text-xs"}),(0,a.jsx)("button",{onClick:()=>N(e.whatsappVerifyToken||""),disabled:!e.whatsappVerifyToken,className:"p-2 border border-l-0 rounded-r-md bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 disabled:opacity-50",children:(0,a.jsx)(c,{size:16})})]})]})]})]})]})]})}},3258:function(e,s,t){"use strict";var a=t(7437);t(2265),s.Z=()=>(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-8",role:"status","aria-label":"Loading",children:[(0,a.jsxs)("svg",{width:"80",height:"80",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",className:"text-blue-600",children:[(0,a.jsxs)("g",{style:{animation:"vc-pulse-bubble 2.5s infinite ease-in-out",transformOrigin:"center"},children:[(0,a.jsx)("path",{d:"M85,50 A35,35 0 1,1 15,50 A35,35 0 0,1 85,50 Z",fill:"currentColor",fillOpacity:"0.1"}),(0,a.jsx)("path",{d:"M20,70 Q30,85 40,70 L20,70 Z",fill:"currentColor",fillOpacity:"0.1"})]}),(0,a.jsx)("path",{style:{strokeDasharray:90,strokeDashoffset:90,animation:"vc-draw-v 1.5s ease-out forwards infinite"},d:"M30 35 L 50 58 L 70 35",stroke:"currentColor",strokeWidth:"5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),(0,a.jsxs)("g",{className:"text-gray-400",fill:"currentColor",children:[(0,a.jsx)("circle",{style:{animation:"vc-blink-ellipsis 1.4s infinite 0s"},cx:"38",cy:"72",r:"3"}),(0,a.jsx)("circle",{style:{animation:"vc-blink-ellipsis 1.4s infinite 0.2s"},cx:"50",cy:"72",r:"3"}),(0,a.jsx)("circle",{style:{animation:"vc-blink-ellipsis 1.4s infinite 0.4s"},cx:"62",cy:"72",r:"3"})]})]}),(0,a.jsx)("p",{className:"text-gray-500 mt-2 text-sm font-medium animate-pulse",children:"Connecting..."})]})}},function(e){e.O(0,[862,138,971,23,744],function(){return e(e.s=3423)}),_N_E=e.O()}]);