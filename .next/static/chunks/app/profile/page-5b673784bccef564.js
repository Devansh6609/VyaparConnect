(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{9874:function(e,s,r){Promise.resolve().then(r.bind(r,6414))},4453:function(e,s,r){"use strict";r.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(8030).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},9061:function(e,s,r){"use strict";r.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(8030).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},6414:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return g}});var a=r(7437),t=r(2265);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,r(8030).Z)("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);var d=r(3274),n=r(9061),l=r(4453),o=r(1513),c=r(3258);let m={hidden:{},visible:{transition:{staggerChildren:.1}}},u={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};var g=()=>{let[e,s]=(0,t.useState)(null),[r,g]=(0,t.useState)(""),[x,y]=(0,t.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[f,p]=(0,t.useState)(!0),[h,b]=(0,t.useState)(!1),[w,j]=(0,t.useState)(!1),[v,k]=(0,t.useState)(null),[N,P]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{p(!0);try{let e=await fetch("/api/profile");if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to load profile.")}let r=await e.json();s(r),g(r.name)}catch(e){k({form:"info",message:e.message})}finally{p(!1)}})()},[]);let C=async e=>{e.preventDefault(),b(!0),k(null),P(null);try{let e=await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r})}),a=await e.json();if(!e.ok)throw Error(a.error||"Failed to update profile.");s(a),P({form:"info",message:"Profile updated successfully!"}),setTimeout(()=>P(null),3e3)}catch(e){k({form:"info",message:e.message})}finally{b(!1)}},S=async e=>{if(e.preventDefault(),x.newPassword!==x.confirmPassword){k({form:"password",message:"New passwords do not match."});return}j(!0),k(null),P(null);try{let e=await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:x.currentPassword,newPassword:x.newPassword})}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to change password.");P({form:"password",message:"Password changed successfully!"}),y({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>P(null),3e3)}catch(e){k({form:"password",message:e.message})}finally{j(!1)}};return f?(0,a.jsx)("div",{className:"p-8 text-center flex items-center justify-center h-full",children:(0,a.jsx)(c.Z,{})}):(0,a.jsxs)("div",{className:"p-6 md:p-8 bg-gray-50/50 dark:bg-gray-900/50 min-h-full",children:[(0,a.jsxs)(o.E.div,{initial:"hidden",animate:"visible",variants:u,children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Profile"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Manage your personal information and password."})]}),(0,a.jsxs)(o.E.div,{className:"mt-8 max-w-4xl mx-auto space-y-8",variants:m,initial:"hidden",animate:"visible",children:[(0,a.jsxs)(o.E.form,{onSubmit:C,className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-100/50 dark:border-gray-700/50",variants:u,children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center",children:[(0,a.jsx)(i,{className:"mr-2 text-blue-600"})," Personal Information"]}),(null==v?void 0:v.form)==="info"&&(0,a.jsx)("div",{className:"bg-red-100 text-red-700 p-3 rounded-md text-sm mb-4",children:v.message}),(null==N?void 0:N.form)==="info"&&(0,a.jsx)("div",{className:"bg-green-100 text-green-700 p-3 rounded-md text-sm mb-4",children:N.message}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"name",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name"}),(0,a.jsx)("input",{id:"name",type:"text",value:r,onChange:e=>g(e.target.value),className:"md:col-span-2 mt-1 w-full border rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"email",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),(0,a.jsx)("input",{id:"email",type:"email",value:(null==e?void 0:e.email)||"",readOnly:!0,disabled:!0,className:"md:col-span-2 mt-1 w-full border rounded-md px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700/50 cursor-not-allowed border-gray-300 dark:border-gray-600"})]})]}),(0,a.jsx)("div",{className:"flex justify-end pt-4 mt-2",children:(0,a.jsxs)("button",{type:"submit",disabled:h,className:"flex items-center justify-center px-6 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 disabled:opacity-50",children:[h?(0,a.jsx)(d.Z,{className:"animate-spin mr-2"}):(0,a.jsx)(n.Z,{className:"mr-2"}),h?"Saving...":"Save Changes"]})})]}),(0,a.jsxs)(o.E.form,{onSubmit:S,className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-100/50 dark:border-gray-700/50",variants:u,children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center",children:[(0,a.jsx)(l.Z,{className:"mr-2 text-purple-600"})," Change Password"]}),(null==v?void 0:v.form)==="password"&&(0,a.jsx)("div",{className:"bg-red-100 text-red-700 p-3 rounded-md text-sm mb-4",children:v.message}),(null==N?void 0:N.form)==="password"&&(0,a.jsx)("div",{className:"bg-green-100 text-green-700 p-3 rounded-md text-sm mb-4",children:N.message}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"currentPassword",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Current Password"}),(0,a.jsx)("input",{id:"currentPassword",type:"password",value:x.currentPassword,onChange:e=>y({...x,currentPassword:e.target.value}),className:"md:col-span-2 mt-1 w-full border rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"newPassword",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"New Password"}),(0,a.jsx)("input",{id:"newPassword",type:"password",value:x.newPassword,onChange:e=>y({...x,newPassword:e.target.value}),className:"md:col-span-2 mt-1 w-full border rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confirm New Password"}),(0,a.jsx)("input",{id:"confirmPassword",type:"password",value:x.confirmPassword,onChange:e=>y({...x,confirmPassword:e.target.value}),className:"md:col-span-2 mt-1 w-full border rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100",required:!0})]})]}),(0,a.jsx)("div",{className:"flex justify-end pt-4 mt-2",children:(0,a.jsxs)("button",{type:"submit",disabled:w,className:"flex items-center justify-center px-6 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 disabled:opacity-50",children:[w?(0,a.jsx)(d.Z,{className:"animate-spin mr-2"}):(0,a.jsx)(n.Z,{className:"mr-2"}),w?"Updating...":"Update Password"]})})]})]})]})}},3258:function(e,s,r){"use strict";var a=r(7437);r(2265),s.Z=()=>(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-8",role:"status","aria-label":"Loading",children:[(0,a.jsxs)("svg",{width:"80",height:"80",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",className:"text-blue-600",children:[(0,a.jsxs)("g",{style:{animation:"vc-pulse-bubble 2.5s infinite ease-in-out",transformOrigin:"center"},children:[(0,a.jsx)("path",{d:"M85,50 A35,35 0 1,1 15,50 A35,35 0 0,1 85,50 Z",fill:"currentColor",fillOpacity:"0.1"}),(0,a.jsx)("path",{d:"M20,70 Q30,85 40,70 L20,70 Z",fill:"currentColor",fillOpacity:"0.1"})]}),(0,a.jsx)("path",{style:{strokeDasharray:90,strokeDashoffset:90,animation:"vc-draw-v 1.5s ease-out forwards infinite"},d:"M30 35 L 50 58 L 70 35",stroke:"currentColor",strokeWidth:"5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),(0,a.jsxs)("g",{className:"text-gray-400",fill:"currentColor",children:[(0,a.jsx)("circle",{style:{animation:"vc-blink-ellipsis 1.4s infinite 0s"},cx:"38",cy:"72",r:"3"}),(0,a.jsx)("circle",{style:{animation:"vc-blink-ellipsis 1.4s infinite 0.2s"},cx:"50",cy:"72",r:"3"}),(0,a.jsx)("circle",{style:{animation:"vc-blink-ellipsis 1.4s infinite 0.4s"},cx:"62",cy:"72",r:"3"})]})]}),(0,a.jsx)("p",{className:"text-gray-500 mt-2 text-sm font-medium animate-pulse",children:"Connecting..."})]})}},function(e){e.O(0,[862,971,23,744],function(){return e(e.s=9874)}),_N_E=e.O()}]);