"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[46],{5733:function(e,s,a){a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(8030).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5826:function(e,s,a){var t=a(7437);a(2265);var r=a(1339);let l=()=>(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border dark:border-gray-700",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-center",children:[(0,t.jsxs)("div",{className:"md:col-span-3 space-y-2",children:[(0,t.jsx)(r.Z,{className:"h-6 w-3/5"}),(0,t.jsx)(r.Z,{className:"h-4 w-4/5"})]}),(0,t.jsx)("div",{className:"md:col-span-1",children:(0,t.jsx)(r.Z,{className:"h-6 w-3/4"})}),(0,t.jsx)("div",{className:"md:col-span-2 flex justify-start md:justify-end",children:(0,t.jsx)(r.Z,{className:"h-6 w-20 rounded-full"})})]}),(0,t.jsxs)("div",{className:"border-t dark:border-gray-700 mt-3 pt-3 flex justify-between items-center",children:[(0,t.jsx)(r.Z,{className:"h-4 w-1/3"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(r.Z,{className:"h-8 w-8 rounded-full"}),(0,t.jsx)(r.Z,{className:"h-8 w-8 rounded-full"})]})]})]});s.Z=()=>(0,t.jsxs)("div",{className:"p-6 md:p-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(r.Z,{className:"h-8 w-64"}),(0,t.jsx)(r.Z,{className:"h-4 w-80 mt-2"})]}),(0,t.jsx)(r.Z,{className:"h-10 w-28 rounded-md"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-3 space-y-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)(l,{},s))}),(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg border dark:border-gray-700 text-center",children:[(0,t.jsx)(r.Z,{className:"h-12 w-16 mx-auto"}),(0,t.jsx)(r.Z,{className:"h-4 w-32 mx-auto mt-2"})]})})]})]})},1438:function(e,s,a){var t=a(7437),r=a(2265),l=a(5260);let d=["DRAFT","SENT","CONFIRMED","BILLED","PARTIALLY_PAID","PAID","CANCELLED"];s.Z=e=>{let{isOpen:s,onClose:a,currentFilters:n,onApplyFilters:c}=e,[i,o]=(0,r.useState)(n.statuses),x=e=>{o(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])};return(0,t.jsx)(l.Z,{isOpen:s,onClose:a,title:"Filter Transactions",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Status"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2 mt-1",children:d.map(e=>(0,t.jsxs)("label",{className:"flex items-center space-x-2 p-1 rounded hover:bg-gray-100 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:i.includes(e),onChange:()=>x(e),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,t.jsx)("span",{className:"text-sm capitalize",children:e.replace("_"," ").toLowerCase()})]},e))})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center pt-2",children:[(0,t.jsx)("button",{onClick:()=>{o([]),c({statuses:[]})},className:"px-4 py-2 text-sm text-gray-600 hover:bg-gray-100 border rounded-md",children:"Reset"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:a,className:"px-4 py-2 border rounded-md text-sm",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>{c({statuses:i})},className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm",children:"Apply Filters"})]})]})]})})}},6901:function(e,s,a){var t=a(7437);a(2265);let r={DRAFT:{label:"Draft",className:"bg-gray-100 text-gray-700"},SENT:{label:"Sent",className:"bg-blue-100 text-blue-700"},CONFIRMED:{label:"Confirmed",className:"bg-indigo-100 text-indigo-700"},BILLED:{label:"Billed",className:"bg-purple-100 text-purple-700"},PARTIALLY_PAID:{label:"Partially Paid",className:"bg-yellow-100 text-yellow-800"},PAID:{label:"Paid",className:"bg-green-100 text-green-700"},CANCELLED:{label:"Cancelled",className:"bg-red-100 text-red-700"}};s.Z=e=>{let{status:s}=e,a=r[s]||{label:"Unknown",className:"bg-gray-100 text-gray-700"};return(0,t.jsx)("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full inline-block ".concat(a.className),children:a.label})}},9003:function(e,s,a){var t=a(7437);a(2265);var r=a(7138),l=a(6901),d=a(9302),n=a(5733),c=a(1513),i=a(9788);s.Z=e=>{let{transaction:s,onViewDetails:a}=e;return(0,t.jsxs)(c.E.div,{className:"bg-white dark:bg-[var(--card-background)] p-4 rounded-lg shadow-sm border dark:border-[var(--card-border)] hover:shadow-md transition-shadow duration-200 flex flex-col",children:[(0,t.jsxs)("div",{className:"flex-grow grid grid-cols-1 md:grid-cols-6 gap-4 items-center",children:[(0,t.jsxs)("div",{className:"md:col-span-3",children:[(0,t.jsx)("p",{className:"font-bold text-gray-800 dark:text-gray-100 text-lg",children:s.customerName}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 truncate",children:s.itemsSummary})]}),(0,t.jsx)("div",{className:"md:col-span-1 text-left md:text-right",children:(0,t.jsxs)("p",{className:"font-semibold text-lg dark:text-gray-100",children:["₹",s.totalValue.toLocaleString("en-IN")]})}),(0,t.jsx)("div",{className:"md:col-span-2 flex justify-start md:justify-end",children:(0,t.jsx)(l.Z,{status:s.status})})]}),(0,t.jsxs)("div",{className:"border-t dark:border-[var(--card-border)] mt-3 pt-3 flex justify-between items-center text-sm text-gray-500 dark:text-gray-400",children:[(0,t.jsxs)("div",{children:["ID: ",(0,t.jsxs)("span",{className:"font-mono text-xs",children:[s.id.substring(0,8),"..."]}),(0,t.jsx)("span",{className:"mx-2",children:"|"}),(0,d.WU)(new Date(s.date),"dd MMM, yyyy")]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(r.default,{href:"/chat?contactId=".concat(s.contactId),className:"p-2 text-green-600 bg-green-50 dark:bg-green-900/30 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/50 rounded-full",title:"Chat on WhatsApp",children:(0,t.jsx)(i.Z,{name:"messageCircle",size:18})}),(0,t.jsx)("button",{onClick:a,className:"p-2 text-gray-600 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full",title:"View Details",children:(0,t.jsx)(n.Z,{size:18})})]})]})]})}},6149:function(e,s,a){var t=a(7437),r=a(2265),l=a(5260),d=a(6901),n=a(9302),c=a(3274);s.Z=e=>{var s,a,i;let{quotationId:o,isOpen:x,onClose:m}=e,[h,g]=(0,r.useState)(null),[u,j]=(0,r.useState)(!0);(0,r.useEffect)(()=>{x&&o&&(async()=>{j(!0);try{let e=await fetch("/api/quotations/".concat(o));if(!e.ok)throw Error("Failed to fetch details.");let s=await e.json();g(s)}catch(e){console.error(e)}finally{j(!1)}})()},[x,o]);let p=(null==h?void 0:null===(s=h.payments)||void 0===s?void 0:s.reduce((e,s)=>e+s.amount,0))||0,b=((null==h?void 0:h.total)||0)-p;return(0,t.jsx)(l.Z,{isOpen:x,onClose:m,title:"Transaction #".concat(o.substring(0,8)),children:u?(0,t.jsx)("div",{className:"text-center p-8",children:(0,t.jsx)(c.Z,{className:"animate-spin inline-block"})}):h?(0,t.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"To:"})," ",h.customerName]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Date:"})," ",(0,n.WU)(new Date(h.createdAt),"PP")]})]}),(0,t.jsx)(d.Z,{status:h.status})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-1",children:"Items"}),(0,t.jsxs)("table",{className:"w-full text-left",children:[(0,t.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700/50 text-xs",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-2 font-medium",children:"Product"}),(0,t.jsx)("th",{className:"p-2 font-medium text-center",children:"Qty"}),(0,t.jsx)("th",{className:"p-2 font-medium text-right",children:"Total"})]})}),(0,t.jsx)("tbody",{children:h.items.map(e=>{var s;return(0,t.jsxs)("tr",{className:"border-b dark:border-gray-700",children:[(0,t.jsx)("td",{className:"p-2",children:null===(s=e.product)||void 0===s?void 0:s.name}),(0,t.jsx)("td",{className:"p-2 text-center",children:e.quantity}),(0,t.jsxs)("td",{className:"p-2 text-right",children:["₹",(e.price*e.quantity).toLocaleString()]})]},e.id)})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-1",children:"Pricing"}),(0,t.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md space-y-1",children:[(0,t.jsxs)("p",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Subtotal:"})," ",(0,t.jsxs)("span",{children:["₹",h.subtotal.toLocaleString()]})]}),h.discountPercentage&&(0,t.jsxs)("p",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Discount:"})," ",(0,t.jsxs)("span",{children:["(",h.discountPercentage,"%)"]})]}),h.taxRate&&(0,t.jsxs)("p",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Tax:"})," ",(0,t.jsxs)("span",{children:["(",h.taxRate,"%)"]})]}),h.deliveryCharges&&(0,t.jsxs)("p",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Delivery:"})," ",(0,t.jsxs)("span",{children:["₹",h.deliveryCharges.toLocaleString()]})]}),(0,t.jsxs)("p",{className:"flex justify-between font-bold border-t dark:border-gray-600 pt-1 mt-1",children:[(0,t.jsx)("span",{children:"Total:"})," ",(0,t.jsxs)("span",{children:["₹",h.total.toLocaleString()]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-1",children:"Payments"}),(0,t.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md space-y-1",children:[null===(a=h.payments)||void 0===a?void 0:a.map(e=>(0,t.jsxs)("p",{className:"flex justify-between",children:[(0,t.jsxs)("span",{children:[e.method," (",(0,n.WU)(new Date(e.createdAt),"dd/MM/yy"),")"]})," ",(0,t.jsxs)("span",{children:["₹",e.amount.toLocaleString()]})]},e.id)),(null===(i=h.payments)||void 0===i?void 0:i.length)===0&&(0,t.jsx)("p",{className:"text-gray-500 text-xs",children:"No payments recorded."}),(0,t.jsxs)("p",{className:"flex justify-between font-bold text-green-600 border-t dark:border-gray-600 pt-1 mt-1",children:[(0,t.jsx)("span",{children:"Paid:"})," ",(0,t.jsxs)("span",{children:["₹",p.toLocaleString()]})]}),(0,t.jsxs)("p",{className:"flex justify-between font-bold text-red-600",children:[(0,t.jsx)("span",{children:"Due:"})," ",(0,t.jsxs)("span",{children:["₹",b.toLocaleString()]})]})]})]})]})]}):(0,t.jsx)("p",{className:"text-center p-8 text-red-500",children:"Could not load transaction details."})})}},9788:function(e,s,a){var t=a(7437);a(2265);var r=a(4207),l=a(6780),d=a(5137),n=a(8711),c=a(2468),i=a(2638),o=a(933),x=a(8314),m=a(6935),h=a(1077),g=a(7164),u=a(6649),j=a(9827),p=a(2023),b=a(404),y=a(8604),N=a(690),f=a(7140),v=a(9100),Z=a(4453),k=a(7583),w=a(7524),C=a(6863),D=a(5404),L=a(4258),P=a(1510),A=a(1125),S=a(3907),E=a(8637),I=a(883),T=a(2022),R=a(3267),z=a(9099),M=a(1240),F=a(4697);let _={activity:r.Z,alertCircle:l.Z,arrowLeft:d.Z,barChart3:n.Z,check:c.Z,checkCheck:i.Z,clock:o.Z,combine:x.Z,creditCard:m.Z,dollarSign:h.Z,download:g.Z,edit:u.Z,file:j.Z,fileText:p.Z,filter:b.Z,image:y.Z,info:N.Z,layoutDashboard:f.Z,lineChart:v.Z,lock:Z.Z,messageCircle:k.Z,package:w.Z,pieChart:C.Z,radio:D.Z,settings:L.Z,share2:P.Z,slidersHorizontal:A.Z,sparkles:S.Z,sunrise:E.Z,trash2:I.Z,user:T.Z,userPlus:R.Z,userX:z.Z,users:M.Z,x:F.Z},B=e=>e?e.charAt(0).toLowerCase()+e.slice(1):"alertCircle";s.Z=e=>{let{name:s,...a}=e,r=B(s),d=_[r];return d?(0,t.jsx)(d,{...a}):(console.warn('Icon "'.concat(s,'" (normalized to "').concat(r,'") not found in the icon map. Rendering a fallback icon.')),(0,t.jsx)(l.Z,{...a,color:"red"}))}},5260:function(e,s,a){var t=a(7437);a(2265),s.Z=e=>{let{isOpen:s,onClose:a,title:r,children:l}=e;return s?(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:a,children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md m-4",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:r}),(0,t.jsx)("button",{onClick:a,className:"text-gray-500 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:"\xd7"})]}),(0,t.jsx)("div",{className:"p-4",children:l})]})}):null}},1339:function(e,s,a){var t=a(7437);a(2265),s.Z=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:function(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return s.filter(Boolean).join(" ")}("animate-pulse rounded-md bg-gray-200 dark:bg-gray-700",s),...a})}}}]);