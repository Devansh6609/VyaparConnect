(()=>{var e={};e.id=2940,e.ids=[2940],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},67691:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>d.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>o}),a(30101),a(95499),a(72110),a(35866);var s=a(23191),r=a(88716),n=a(37922),d=a.n(n),i=a(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);a.d(t,l);let o=["",{children:["settings",{children:["whatsapp",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,30101)),"C:\\vyaparconnect-crm\\src\\app\\settings\\whatsapp\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,95499)),"C:\\vyaparconnect-crm\\src\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(a.bind(a,72110)),"C:\\vyaparconnect-crm\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\vyaparconnect-crm\\src\\app\\settings\\whatsapp\\page.tsx"],p="/settings/whatsapp/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/settings/whatsapp/page",pathname:"/settings/whatsapp",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},92057:(e,t,a)=>{Promise.resolve().then(a.bind(a,77206))},36728:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},31215:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},77206:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var s=a(10326),r=a(17577),n=a(41291),d=a(36728),i=a(77506),l=a(31215);let o=(0,a(62881).Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var c=a(55795),p=a(79375),m=a(90434);let x=()=>{let[e,t]=(0,r.useState)({}),[a,x]=(0,r.useState)(!0),[u,g]=(0,r.useState)(!1),[h,b]=(0,r.useState)(""),[y,f]=(0,r.useState)(""),[k,v]=(0,r.useState)("");(0,r.useEffect)(()=>{v(`${window.location.origin}/api/webhooks/whatsapp`),(async()=>{x(!0);try{let e=await fetch("/api/settings/whatsapp");if(!e.ok)throw Error("Failed to load settings.");let a=await e.json();t(a)}catch(e){b(e.message)}finally{x(!1)}})()},[]);let j=e=>{let{name:a,value:s}=e.target;t(e=>({...e,[a]:s}))},w=async a=>{a.preventDefault(),g(!0),b(""),f("");try{let a=await fetch("/api/settings/whatsapp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await a.json();if(!a.ok)throw Error(s.error||"Failed to save settings.");t(s),f("Settings saved successfully!"),setTimeout(()=>f(""),3e3)}catch(e){b(e.message)}finally{g(!1)}},N=e=>{navigator.clipboard.writeText(e)};return a?s.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:s.jsx(p.Z,{})}):(0,s.jsxs)("div",{className:"p-6 md:p-8 bg-gray-50/50 dark:bg-gray-900/50 min-h-screen",children:[s.jsx(m.default,{href:"/settings",className:"text-sm text-blue-600 hover:underline mb-4 inline-block",children:"â† Back to Settings"}),s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"WhatsApp Setup"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Connect your WhatsApp Business Account to start messaging."}),(0,s.jsxs)("div",{className:"mt-8 max-w-4xl mx-auto space-y-8",children:[h&&(0,s.jsxs)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md flex items-center",children:[s.jsx(n.Z,{className:"h-5 w-5 mr-3"}),s.jsx("span",{children:h})]}),y&&s.jsx("div",{className:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-md",children:s.jsx("p",{children:y})}),(0,s.jsxs)(c.E.div,{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-100/50 dark:border-gray-700/50",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Step 1: Enter Your API Credentials"}),(0,s.jsxs)("div",{className:"p-3 bg-blue-50 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 rounded-md text-sm flex items-start mb-4",children:[s.jsx(d.Z,{className:"w-5 h-5 mr-2 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("span",{children:["Find these credentials in your ",s.jsx("a",{href:"https://developers.facebook.com/apps/",target:"_blank",rel:"noopener noreferrer",className:"font-bold underline",children:"Meta for Developers App"})," under ",s.jsx("code",{className:"bg-black/10 px-1 rounded",children:"WhatsApp > API Setup"}),"."]})]}),(0,s.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Phone Number ID"}),s.jsx("input",{type:"text",name:"whatsappPhoneNumberId",value:e.whatsappPhoneNumberId||"",onChange:j,className:"w-full border rounded-md p-2 mt-1 dark:bg-gray-700 dark:border-gray-600",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Business Account ID"}),s.jsx("input",{type:"text",name:"whatsappBusinessAccountId",value:e.whatsappBusinessAccountId||"",onChange:j,className:"w-full border rounded-md p-2 mt-1 dark:bg-gray-700 dark:border-gray-600",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Permanent Access Token"}),s.jsx("input",{type:"password",name:"whatsappAccessToken",value:e.whatsappAccessToken||"",onChange:j,className:"w-full border rounded-md p-2 mt-1 dark:bg-gray-700 dark:border-gray-600",required:!0})]}),s.jsx("div",{className:"flex justify-end pt-2",children:(0,s.jsxs)("button",{type:"submit",disabled:u,className:"flex items-center justify-center px-6 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 disabled:opacity-50",children:[u?s.jsx(i.Z,{className:"animate-spin mr-2"}):s.jsx(l.Z,{className:"mr-2"}),u?"Saving...":"Save Credentials"]})})]})]}),(0,s.jsxs)(c.E.div,{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-100/50 dark:border-gray-700/50",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Step 2: Configure Webhook in Meta"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Copy the following values and paste them into your Meta App's webhook configuration page."}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Callback URL"}),(0,s.jsxs)("div",{className:"flex items-center mt-1",children:[s.jsx("input",{type:"text",value:k,readOnly:!0,className:"w-full border rounded-l-md p-2 bg-gray-100 dark:bg-gray-700/50 font-mono text-xs"}),s.jsx("button",{onClick:()=>N(k),className:"p-2 border border-l-0 rounded-r-md bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500",children:s.jsx(o,{size:16})})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Verify Token"}),(0,s.jsxs)("div",{className:"flex items-center mt-1",children:[s.jsx("input",{type:"text",value:e.whatsappVerifyToken||"Save credentials to generate a token",readOnly:!0,className:"w-full border rounded-l-md p-2 bg-gray-100 dark:bg-gray-700/50 font-mono text-xs"}),s.jsx("button",{onClick:()=>N(e.whatsappVerifyToken||""),disabled:!e.whatsappVerifyToken,className:"p-2 border border-l-0 rounded-r-md bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 disabled:opacity-50",children:s.jsx(o,{size:16})})]})]})]})]})]})]})}},30101:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>d,__esModule:()=>n,default:()=>i});var s=a(68570);let r=(0,s.createProxy)(String.raw`C:\vyaparconnect-crm\src\app\settings\whatsapp\page.tsx`),{__esModule:n,$$typeof:d}=r;r.default;let i=(0,s.createProxy)(String.raw`C:\vyaparconnect-crm\src\app\settings\whatsapp\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[8948,6294,1833],()=>a(67691));module.exports=s})();