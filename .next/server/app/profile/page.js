(()=>{var e={};e.id=4178,e.ids=[4178],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},40809:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>l}),a(85282),a(95499),a(72110),a(35866);var s=a(23191),t=a(88716),d=a(37922),n=a.n(d),o=a(95231),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);a.d(r,i);let l=["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,85282)),"C:\\vyaparconnect-crm\\src\\app\\profile\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,95499)),"C:\\vyaparconnect-crm\\src\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(a.bind(a,72110)),"C:\\vyaparconnect-crm\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\vyaparconnect-crm\\src\\app\\profile\\page.tsx"],m="/profile/page",p={require:a,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},48501:(e,r,a)=>{Promise.resolve().then(a.bind(a,98128))},31215:(e,r,a)=>{"use strict";a.d(r,{Z:()=>s});let s=(0,a(62881).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},98128:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>u});var s=a(10326),t=a(17577);let d=(0,a(62881).Z)("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var n=a(77506),o=a(31215),i=a(9015),l=a(55795),c=a(79375);let m={hidden:{},visible:{transition:{staggerChildren:.1}}},p={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},u=()=>{let[e,r]=(0,t.useState)(null),[a,u]=(0,t.useState)(""),[g,x]=(0,t.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[y,f]=(0,t.useState)(!0),[h,b]=(0,t.useState)(!1),[w,v]=(0,t.useState)(!1),[j,P]=(0,t.useState)(null),[k,N]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{f(!0);try{let e=await fetch("/api/profile");if(!e.ok){let r=await e.json();throw Error(r.error||"Failed to load profile.")}let a=await e.json();r(a),u(a.name)}catch(e){P({form:"info",message:e.message})}finally{f(!1)}})()},[]);let q=async e=>{e.preventDefault(),b(!0),P(null),N(null);try{let e=await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a})}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to update profile.");r(s),N({form:"info",message:"Profile updated successfully!"}),setTimeout(()=>N(null),3e3)}catch(e){P({form:"info",message:e.message})}finally{b(!1)}},C=async e=>{if(e.preventDefault(),g.newPassword!==g.confirmPassword){P({form:"password",message:"New passwords do not match."});return}v(!0),P(null),N(null);try{let e=await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:g.currentPassword,newPassword:g.newPassword})}),r=await e.json();if(!e.ok)throw Error(r.error||"Failed to change password.");N({form:"password",message:"Password changed successfully!"}),x({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>N(null),3e3)}catch(e){P({form:"password",message:e.message})}finally{v(!1)}};return y?s.jsx("div",{className:"p-8 text-center flex items-center justify-center h-full",children:s.jsx(c.Z,{})}):(0,s.jsxs)("div",{className:"p-6 md:p-8 bg-gray-50/50 dark:bg-gray-900/50 min-h-full",children:[(0,s.jsxs)(l.E.div,{initial:"hidden",animate:"visible",variants:p,children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Profile"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Manage your personal information and password."})]}),(0,s.jsxs)(l.E.div,{className:"mt-8 max-w-4xl mx-auto space-y-8",variants:m,initial:"hidden",animate:"visible",children:[(0,s.jsxs)(l.E.form,{onSubmit:q,className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-100/50 dark:border-gray-700/50",variants:p,children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center",children:[s.jsx(d,{className:"mr-2 text-blue-600"})," Personal Information"]}),j?.form==="info"&&s.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded-md text-sm mb-4",children:j.message}),k?.form==="info"&&s.jsx("div",{className:"bg-green-100 text-green-700 p-3 rounded-md text-sm mb-4",children:k.message}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 items-center gap-2",children:[s.jsx("label",{htmlFor:"name",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name"}),s.jsx("input",{id:"name",type:"text",value:a,onChange:e=>u(e.target.value),className:"md:col-span-2 mt-1 w-full border rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100",required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 items-center gap-2",children:[s.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),s.jsx("input",{id:"email",type:"email",value:e?.email||"",readOnly:!0,disabled:!0,className:"md:col-span-2 mt-1 w-full border rounded-md px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700/50 cursor-not-allowed border-gray-300 dark:border-gray-600"})]})]}),s.jsx("div",{className:"flex justify-end pt-4 mt-2",children:(0,s.jsxs)("button",{type:"submit",disabled:h,className:"flex items-center justify-center px-6 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 disabled:opacity-50",children:[h?s.jsx(n.Z,{className:"animate-spin mr-2"}):s.jsx(o.Z,{className:"mr-2"}),h?"Saving...":"Save Changes"]})})]}),(0,s.jsxs)(l.E.form,{onSubmit:C,className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-100/50 dark:border-gray-700/50",variants:p,children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center",children:[s.jsx(i.Z,{className:"mr-2 text-purple-600"})," Change Password"]}),j?.form==="password"&&s.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded-md text-sm mb-4",children:j.message}),k?.form==="password"&&s.jsx("div",{className:"bg-green-100 text-green-700 p-3 rounded-md text-sm mb-4",children:k.message}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 items-center gap-2",children:[s.jsx("label",{htmlFor:"currentPassword",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Current Password"}),s.jsx("input",{id:"currentPassword",type:"password",value:g.currentPassword,onChange:e=>x({...g,currentPassword:e.target.value}),className:"md:col-span-2 mt-1 w-full border rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100",required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 items-center gap-2",children:[s.jsx("label",{htmlFor:"newPassword",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"New Password"}),s.jsx("input",{id:"newPassword",type:"password",value:g.newPassword,onChange:e=>x({...g,newPassword:e.target.value}),className:"md:col-span-2 mt-1 w-full border rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100",required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 items-center gap-2",children:[s.jsx("label",{htmlFor:"confirmPassword",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confirm New Password"}),s.jsx("input",{id:"confirmPassword",type:"password",value:g.confirmPassword,onChange:e=>x({...g,confirmPassword:e.target.value}),className:"md:col-span-2 mt-1 w-full border rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100",required:!0})]})]}),s.jsx("div",{className:"flex justify-end pt-4 mt-2",children:(0,s.jsxs)("button",{type:"submit",disabled:w,className:"flex items-center justify-center px-6 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 disabled:opacity-50",children:[w?s.jsx(n.Z,{className:"animate-spin mr-2"}):s.jsx(o.Z,{className:"mr-2"}),w?"Updating...":"Update Password"]})})]})]})]})}},85282:(e,r,a)=>{"use strict";a.r(r),a.d(r,{$$typeof:()=>n,__esModule:()=>d,default:()=>o});var s=a(68570);let t=(0,s.createProxy)(String.raw`C:\vyaparconnect-crm\src\app\profile\page.tsx`),{__esModule:d,$$typeof:n}=t;t.default;let o=(0,s.createProxy)(String.raw`C:\vyaparconnect-crm\src\app\profile\page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),s=r.X(0,[8948,6294,1833],()=>a(40809));module.exports=s})();