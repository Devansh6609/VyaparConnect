"use strict";(()=>{var e={};e.id=1238,e.ids=[1238],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},50121:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>v,patchFetch:()=>x,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>h,staticGenerationAsyncStorage:()=>m});var o={};r.r(o),r.d(o,{POST:()=>p});var a=r(49303),n=r(88716),s=r(60670),i=r(87070),c=r(20728),d=r(21178);async function p(e,{params:t}){let r=t.id;try{let e=await c.Z.contact.update({where:{id:r},data:{isMasterCustomer:!1}});return await (0,d.F)("contact_updated",e),i.NextResponse.json(e,{status:200})}catch(e){return console.error(`Failed to demote contact ${r}:`,e),i.NextResponse.json({error:"Failed to demote customer"},{status:500})}}let u=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/contacts/[id]/demote/route",pathname:"/api/contacts/[id]/demote",filename:"route",bundlePath:"app/api/contacts/[id]/demote/route"},resolvedPagePath:"C:\\vyaparconnect-crm\\src\\app\\api\\contacts\\[id]\\demote\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:h}=u,v="/api/contacts/[id]/demote/route";function x(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:m})}},20728:(e,t,r)=>{r.d(t,{Z:()=>a});let o=require("@prisma/client"),a=globalThis.prisma||new o.PrismaClient},21178:(e,t,r)=>{r.d(t,{F:()=>o});async function o(e,t){let r=process.env.SOCKET_SERVER_URL,o=process.env.SOCKET_EMITTER_SECRET;if(!r||!o){console.error("Socket emitter URL or secret is not configured on the server. Real-time events will not be sent.");return}try{fetch(`${r}/emit`,{method:"POST",headers:{"Content-Type":"application/json","x-emitter-secret":o},body:JSON.stringify({event:e,data:t})})}catch(e){console.error("Failed to emit socket event:",e)}}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[8948,5972],()=>r(50121));module.exports=o})();