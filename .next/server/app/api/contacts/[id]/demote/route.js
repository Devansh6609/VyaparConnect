"use strict";(()=>{var e={};e.id=1238,e.ids=[1238],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},50121:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>v,patchFetch:()=>T,requestAsyncStorage:()=>m,routeModule:()=>u,serverHooks:()=>h,staticGenerationAsyncStorage:()=>l});var o={};r.r(o),r.d(o,{POST:()=>p});var a=r(49303),n=r(88716),s=r(60670),i=r(87070),c=r(20728),d=r(21178);async function p(e,{params:t}){let r=t.id;try{let e=await c.Z.contact.update({where:{id:r},data:{isMasterCustomer:!1}});return await (0,d.F)("contact_updated",e),i.NextResponse.json(e,{status:200})}catch(e){return console.error(`Failed to demote contact ${r}:`,e),i.NextResponse.json({error:"Failed to demote customer"},{status:500})}}let u=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/contacts/[id]/demote/route",pathname:"/api/contacts/[id]/demote",filename:"route",bundlePath:"app/api/contacts/[id]/demote/route"},resolvedPagePath:"C:\\vyaparconnect-crm\\src\\app\\api\\contacts\\[id]\\demote\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:m,staticGenerationAsyncStorage:l,serverHooks:h}=u,v="/api/contacts/[id]/demote/route";function T(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:l})}},20728:(e,t,r)=>{r.d(t,{Z:()=>a});let o=require("@prisma/client"),a=globalThis.prisma||new o.PrismaClient},21178:(e,t,r)=>{r.d(t,{F:()=>o});async function o(e,t){try{let r="https://e3e2fbab318c.ngrok-free.app/api/socket/emit",o=process.env.SOCKET_EMITTER_SECRET;if(!o){console.error("SOCKET_EMITTER_SECRET is not defined. Cannot emit socket event.");return}fetch(r,{method:"POST",headers:{"Content-Type":"application/json","x-emitter-secret":o},body:JSON.stringify({event:e,data:t})}).catch(t=>{console.error(`Failed to emit socket event '${e}' to ${r}:`,t.message)})}catch(e){console.error("Error preparing socket event emission:",e)}}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[8948,5972],()=>r(50121));module.exports=o})();