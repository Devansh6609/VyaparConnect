"use strict";(()=>{var e={};e.id=8798,e.ids=[8798],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},65251:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>f,patchFetch:()=>q,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>c});var r={};a.r(r),a.d(r,{POST:()=>p});var i=a(49303),o=a(88716),n=a(60670),s=a(87070),u=a(20728);async function p(e,t){let{id:a}=await t.params;try{let{discountPercentage:t,taxRate:r,deliveryCharges:i,total:o}=await e.json();if(void 0===o)return s.NextResponse.json({error:"Total amount is required"},{status:400});let n=await u.Z.quotation.update({where:{id:a},data:{discountPercentage:parseFloat(t)||0,taxRate:parseFloat(r)||0,deliveryCharges:parseFloat(i)||0,total:parseFloat(o),status:"BILLED"}});return s.NextResponse.json(n)}catch(e){return console.error(`Failed to finalize quotation ${a}:`,e),s.NextResponse.json({error:e.message||"Failed to finalize bill"},{status:500})}}let l=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/quotations/[id]/finalize/route",pathname:"/api/quotations/[id]/finalize",filename:"route",bundlePath:"app/api/quotations/[id]/finalize/route"},resolvedPagePath:"C:\\vyaparconnect-crm\\src\\app\\api\\quotations\\[id]\\finalize\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:c,serverHooks:m}=l,f="/api/quotations/[id]/finalize/route";function q(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:c})}},20728:(e,t,a)=>{a.d(t,{Z:()=>i});let r=require("@prisma/client"),i=globalThis.prisma||new r.PrismaClient}};var t=require("../../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[8948,5972],()=>a(65251));module.exports=r})();